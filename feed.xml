<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Scott Davis | Software Engineer</title>
    <description>Software Engineer / Person
</description>
    <link>http://localhost:4000/</link>
    <atom:link href="http://localhost:4000/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Mon, 11 May 2020 12:18:04 -0400</pubDate>
    <lastBuildDate>Mon, 11 May 2020 12:18:04 -0400</lastBuildDate>
    <generator>Jekyll v3.8.5</generator>
    
      <item>
        <title>On Being a Parent</title>
        <description>&lt;p&gt;&lt;img src=&quot;/images/becoming-parent.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;“Scott! I need you!!”&lt;/p&gt;

&lt;p&gt;“Oh, Meg’s calling me, I got to go. I’ll talk to you later sis.”&lt;/p&gt;

&lt;p&gt;I could tell from the sound in her voice happened&lt;!--more--&gt;. I ran over to the bathroom, and the look on her face just confirmed it.&lt;/p&gt;

&lt;p&gt;“I think my water broke. I went to the bathroom and when I stood, up I realized I was all wet. And I’m almost positive I was done, I don’t know what else it could be.”&lt;/p&gt;

&lt;p&gt;I ran to the refrigerator and got the midwives’ card with their emergency number on it. We got the midwife on the phone and she congratulated us and gave us some expectation of what’s to come. She said it was good news, since it was 10:30 at night. Meg could take a bath to help with the ensuing contractions and try to get some sleep. Once the contractions wake her up and she can’t sleep through them, she said to give her another call.&lt;/p&gt;

&lt;p&gt;Sleeping through most of the early labor sounded good to both of us.&lt;/p&gt;

&lt;hr class=&quot;time-jump&quot; /&gt;

&lt;p&gt;I picked Theo up and was changing his diaper. It was around 6 or so in the morning. He had slept pretty well, but once I had him on the table, I noticed his legs looked like they may be a little bruised. I grabbed diaper, one of the ones from our baby shower and changed him. This one said “You can do it Dad!”. I wish we had kept track of who wrote what message on them!&lt;/p&gt;

&lt;p&gt;I walked into the living room with Meg, “Hey, his legs are looking more bruised. I don’t how this could have happened. Was it the car seat? We didn’t have it THAT tight.. Are babies just that sensitive?”.&lt;/p&gt;

&lt;p&gt;Two days earlier we took him home from the hospital in a taxi. We had trouble getting him in the car seat since he was so long and none of us had ever used a car seat. We got from the nurse, and he was in but it was definitely a tight fit.&lt;/p&gt;

&lt;p&gt;We were growing more concerned at this point. “Let’s make an appointment for the pediatrician today if we can”. We both agreed and made the appointment later in the afternoon.&lt;/p&gt;

&lt;p&gt;Meg was holding Theo and despite the bruising he seemed fine and happy. She was talking to him and making faces. She looked down at his little bruised legs and then at his diaper, “You can do it Dad!”. And then back at the bruising, and back at the diaper. The writing was in blue sharpie..&lt;/p&gt;

&lt;p&gt;She called me over and we tried rubbing of the ink from his skin, and off it came. Holy shit, he’s fine.. and for two days we thought we were the worst, accidentally abusive, parents. We’d worried if we were breaking him on day 2, how will he ever live to grow up!&lt;/p&gt;

&lt;p&gt;The rest of those diapers immediately landed in the trash can.&lt;/p&gt;

&lt;hr class=&quot;time-jump&quot; /&gt;

&lt;p&gt;I had the app open, “Contraction Master”. What a name.&lt;/p&gt;

&lt;p&gt;“Ok, tell me when to start”.&lt;/p&gt;

&lt;p&gt;“Now”&lt;/p&gt;

&lt;p&gt;I started the timer and waited. Thirty seconds came and I expected her to tell me when to stop. It kept going and it got to a minute.&lt;/p&gt;

&lt;p&gt;“Ok, it’s over now”.&lt;/p&gt;

&lt;p&gt;A minute seemed a little long. I remember the classes we took, it should start off easy, like 30 seconds, and those should last for an hour or more. Just a few minutes later, “Ok, another one’s coming!”.&lt;/p&gt;

&lt;p&gt;About 40 minutes later I’d timed 5 or so contractions. Almost all of them were over a minute and some later ones were a minute to a minute and a half. I wondered if Meg was feeling them correctly beginning to end? Or was I timing them wrong? We were getting a little worried at this point, it didn’t seem right.&lt;/p&gt;

&lt;hr class=&quot;time-jump&quot; /&gt;

&lt;p&gt;I peaked into the side of Theo’s diaper, “no poop” I said. Meg sat on the bed, reading an article.&lt;/p&gt;

&lt;p&gt;“It’s pretty full though, I’ll still change it.” Due to all the stories I’d heard, getting peed on while changing a diaper seemed inevitable. But still, I always stand to the side and never in the line of “fire”. If he was going to get me, he was going to have to go out of his way to do it.&lt;/p&gt;

&lt;p&gt;I had his diaper off and covered his bottom up with some vaseline. I was getting his new diaper ready it happened. A brownish yellow stream of poop shot straight out of his vaseline coated butt. It left the changing pad, the edge of the changing table, and traveled another foot and a half, straight into the mesh siding of the bassinet, splitting into smaller streams of poop.&lt;/p&gt;

&lt;p&gt;My eyes were wide open and I just stared, frozen in place. I must have said something because Meg noticed and came running over. What amazing team work we had, without saying much we literally leapt into action. Meg’s leap landed a little bit into the poop puddle on the floor, but it was ok, because we were on this!&lt;/p&gt;

&lt;p&gt;I used 5, maybe 10 wipes to furiously clean up his butt, and also the changing pad. Thank God we got the kind that doesn’t need a cloth cover! It’s amazing how difficult it is to wipe up poop from the changing pad while keeping his kicking legs from getting in it all over again.&lt;/p&gt;

&lt;p&gt;Meg worked on the floor, this required some heavy duty paper towels, and several wet wipes to finish the job. Then came the bassinet, the poor poor bassinet. After some soap and water, you could still see some yellow staining if you knew where to look. But what else could we do? Theo made his bed, and now he’ll have to lie in it too.&lt;/p&gt;

&lt;hr class=&quot;time-jump&quot; /&gt;

&lt;p&gt;We had called the midwife again, the other one had finished her shift and Jo had just started. She said to call back when Meg could not talk through a contraction any more. She was visibly in a lot of pain, and it was hard for me to imagine a contraction with so much pain she couldn’t talk through it. Her water broke about an hour and a half ago. We were supposed to be sleeping through the night. We hadn’t even been finished our dinner back from when all of this started.&lt;/p&gt;

&lt;p&gt;Her contractions were coming faster and faster, and the bath did not help. She was now sitting on the toilet when a particularly intense one hit. She was sitting there because she was feeling nauseous and the tub was close by. She writhed in pain and then vomitted in the tub. I’ve never felt so helpless in my life. So much so that I also had a heaping of guilt on top. We called the midwife yet again. I’m sure she loved hearing back from us so soon. This time we had her on the phone again and when another contraction came. She was able to hear Meg through it all. She could do nothing but scream and cry out. Bent over her face was red and in obvious agony. It was then and only then, after all the long and frequent contractions, after the vomit in the tub, and hearing Meg over the phone that she finally relented.&lt;/p&gt;

&lt;p&gt;“I think it would be good now to start getting ready to leave. There’s no rush, and I’ll meet you both at the hospital”.&lt;/p&gt;

&lt;hr class=&quot;time-jump&quot; /&gt;

&lt;p&gt;Theo had just rolled over on his belly, and he just turned four months! He grunted and strained, his face turning red. He reached is arms out and pulled them back. His legs kicked, but were not yet coordinated enough to push off the ground. This little guy was trying to crawl already!&lt;/p&gt;

&lt;p&gt;Minutes of this go by and we leave him be, he’s getting the best tummy time workout ever. But his arms are now starting to make some progress, he actually moved a little… He stuck the other arm out and moved again. His legs were still not helping, but here he was, arming crawling, across the floor, grunting and straining the whole way. It was a kind of stubborness and grit that both Meg and I were reminded of ourselves.&lt;/p&gt;

&lt;p&gt;We thought we had four more months before the crawling started, but if was finally time. We needed to actually baby-proof the house.&lt;/p&gt;

&lt;hr class=&quot;time-jump&quot; /&gt;

&lt;p&gt;No rush!? No rush?! I ran around like the proverbial chicken with its head cut off. Our hospital bag was packed but not all the way. I grabbed a sponge and scooped the puke out of the tub and into a bucket that I could flush down the toilet. We couldn’t leave that there for two days.&lt;/p&gt;

&lt;p&gt;I ran around and got a garbage bag, towel, hospital bag and called a car. This was really happening. The cab driver was calm, and there was no speeding through red lights or anything. The calmness of the drive I think helped us both calm our nerves a bit. We burst into Labor and Delivery, and in front of the waiting room reception desk, Meg keeled over with another intense constraction. They rushed her to the back, where Jo, our midwife, was already there.&lt;/p&gt;

&lt;p&gt;“Oh yes, insurance cards, I have those”.&lt;/p&gt;

&lt;p&gt;As she made copies, I looked over. Three other couples, waiting patiently and quietly, were staring at me, looking, all of a sudden, a little more worried. This, they thought, is what it will be like.&lt;/p&gt;

&lt;hr class=&quot;time-jump&quot; /&gt;

&lt;p&gt;&lt;em class=&quot;footnote&quot;&gt;This was orginally written in 2017, but I never quite finished it. It is published now, after we have just welcomed our second child, a baby girl, this past December. Reflecting back on these stories, I’ve realized I must have changed Theo thousands of times by now, but I really had no idea what I was doing then. I like that phrase, “changed”, and think it’s apt for parenting. We change them, and they change us.&lt;/em&gt;&lt;/p&gt;
</description>
        <pubDate>Mon, 11 May 2020 00:00:00 -0400</pubDate>
        <link>http://localhost:4000/blog/on-being-a-parent</link>
        <guid isPermaLink="true">http://localhost:4000/blog/on-being-a-parent</guid>
        
        
      </item>
    
      <item>
        <title>Becoming a Recurser</title>
        <description>&lt;p&gt;&lt;img src=&quot;/images/recurse.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;I recently had the priveledge to attend the &lt;a href=&quot;https://www.recurse.com/&quot;&gt;Recurse Center&lt;/a&gt;, which if you have not heard of, you should definitely check out. It was a really interesting time to attend, given the current global pandemic we all are finding ourselves in now. The entire experience was moved online,&lt;!--more--&gt; and done remotely.&lt;/p&gt;

&lt;p&gt;While a lot of the social aspect was lost (but credit is due to the RC team, a lot was retained as well), I was still able to grow and learn about a number of things I had no idea I would tackle. I wanted to cover everything here, as a record of what I learned, and maybe as a starting place for when I can jump back in!&lt;/p&gt;

&lt;h2 id=&quot;d3&quot;&gt;D3&lt;/h2&gt;

&lt;p&gt;I had been wanting to learn about &lt;a href=&quot;https://d3js.org/&quot;&gt;D3&lt;/a&gt; for a long time, and finally I had the opportunity. Infographics, in particular, have been an interest of mine since my graphic design days. In particular, &lt;a href=&quot;https://en.wikipedia.org/wiki/Edward_Tufte&quot;&gt;Edward Tufte&lt;/a&gt; was someone whose work I always admired. I figured that for a project, I could build something in D3 in the style of Tufte. After a bit of research, I found &lt;a href=&quot;https://www.cl.cam.ac.uk/~sjm217/projects/graphics/&quot;&gt;a library&lt;/a&gt; written in R that basically accomplished what I was looking for. I used that library as a visual guide to basically build the same thing, but in javascript.&lt;/p&gt;

&lt;p&gt;With that in mind, I was able to publish &lt;a href=&quot;https://www.npmjs.com/package/fancy-axis&quot;&gt;fancy-axis&lt;/a&gt;, with its first feature, a rug plot. It implements the same interface as D3 for axes, so that it follows the same API and can be used interchangeably. But now that the axes will need to access the chart data directly, it also adds a couple more methods as well an options object for styling, but it follow the same patterns as the rest of the library’s api so that it should still be familiar. Here is an example:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;rugPlot&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;fancy-axis&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
 
&lt;span class=&quot;c1&quot;&gt;// dataset is like [{y: ... }, ...]&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;leftAxis&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;rugPlot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;axisLeft&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;yScale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;rgba(0,0,0,0.1)&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;strokeWidth&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;datum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;dataset&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;bottomAxis&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;rugPlot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;axisBottom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;xScale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;rgba(0,0,0,0.1)&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;strokeWidth&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;datum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;dataset&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
 
&lt;span class=&quot;nx&quot;&gt;svg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;g&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;y axis&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;leftAxis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;svg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;g&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;x axis&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;transform&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;translate(0,&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;height&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;bottomAxis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;and here is what that could look like in a sample chart I built, with the options listed above:
&lt;img src=&quot;https://github.com/scttdavs/fancy-axis/raw/master/rug-plot-example.png&quot; alt=&quot;drawing&quot; style=&quot;max-width:400px; display: block;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;elm&quot;&gt;Elm&lt;/h2&gt;

&lt;p&gt;I had wanted to dive into another language to further broaden my horizons on what are the styles and stardards are of another successful and popular language. I at first wanted to try some dialect of Lisp, probably Clojure, but I start also looking at Elm which is heavily influenced by Haskell.&lt;/p&gt;

&lt;p&gt;It is a pure functional language, which I was interest in, and it compiled to Javascript. One thing I didn’t know, is that it can also be used to build an entire web application front end, including the UI. In that sense, it can be an entire replacement for libraries such as React, Vue, etc.&lt;/p&gt;

&lt;p&gt;I completed the official beginner’s tutorial, and built some small components, such as a simple counter. I enjoyed the type system more, but overall I did have trouble getting used to the syntax. I don’t think I would pick it up on my own, but I do think I would enjoy working on an existing project that used Elm! Here is a small snippet of a &lt;a href=&quot;https://en.wikipedia.org/wiki/%22Hello,_World!%22_program&quot;&gt;“Hello, world” app&lt;/a&gt; for clarity:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-elm&quot; data-lang=&quot;elm&quot;&gt;&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Html&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;exposing&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;greet&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;greet&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;World&quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;main&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;join&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; &quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;Hello&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;greet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h2 id=&quot;webassembly&quot;&gt;WebAssembly&lt;/h2&gt;

&lt;p&gt;All code eventually runs as machine code. Before it gets to there, it is compiled to assembly, which is a symbolic representation of machine code. Since machine code is specific to the hardware it is run on, so is assembly. So, code must be compiled to something else first, called an intermediate representation. This is more portable now, as it can be run on any computer, and that computer would be responsible for compiling it into its own assembly.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://webassembly.org/&quot;&gt;WebAssembly&lt;/a&gt; aims to be another intermediate representation, fitting in right before assembly. It is run in the browser, and the implications are vast. Consider the JVM, which is what Java, Scala, Clojure, and others compile down to. This is considered an intermediate representation. If a compiler exists to compile code written for the JVM into WebAssembly, then any programs written in those languges can now be run in the browser!!&lt;/p&gt;

&lt;h3 id=&quot;the-end-of-javascript&quot;&gt;The end of Javascript?&lt;/h3&gt;

&lt;p&gt;Not at all, as Javascript is still the language of the web. But WebAssembly can be much faster. Nowadays, Javascript is fast mostly because of the &lt;a href=&quot;https://en.wikipedia.org/wiki/Just-in-time_compilation&quot;&gt;JIT (just in time) compiler&lt;/a&gt;. This is a special kind of compiler that compiles and optimizes code into machine code on the fly. Due to the dynamic nature of Javascript, it cannot do this ahead of time, it has to do it at run time. But with WebAssembly, since it is compiled much closer to assembly, you cannot retain that dynamism. Types must be known ahead of time, which means the optimization that the JIT does can be done ahead of time, and is more reliable. This is not to say that all apps should be in WebAssembly, but if there is a particular CPU heavy piece of code, it could benefit from being run in WebAssembly.&lt;/p&gt;

&lt;h3 id=&quot;so-i-need-to-learn-rust-now&quot;&gt;So I need to learn Rust now?&lt;/h3&gt;

&lt;p&gt;Nope, there is good news for us Javascript devs out there. A new language called &lt;a href=&quot;https://docs.assemblyscript.org/&quot;&gt;AssemblyScript&lt;/a&gt; has been created and is a subset of &lt;a href=&quot;https://www.typescriptlang.org/&quot;&gt;TypeScript&lt;/a&gt;, with all the special types it needs to compile correctly to WebAssembly.&lt;/p&gt;

&lt;p&gt;There are some special caveats (with WebAssembly as a whole), such as you can only return numbers. If you return complex type, such as an array, function, class instance, or even a string, the number returned will point to the location in the shared memory buffer where you can retrieve the data. There are some nice loaders though, where this work is done for you, and you can return strings and typed arrays, but not currently any other comlplex type.&lt;/p&gt;

&lt;p&gt;Here is a sample of AssemblyScript that just adds two 32 bit signed integers:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-typescript&quot; data-lang=&quot;typescript&quot;&gt;&lt;span class=&quot;k&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i32&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h2 id=&quot;collaborative-text-editor&quot;&gt;Collaborative text editor&lt;/h2&gt;

&lt;p&gt;A few years ago at eBay, we typically used &lt;a href=&quot;http://collabedit.com/&quot;&gt;Collabedit&lt;/a&gt; for our coding interviews. It wasn’t that good, and often we lost connection and had to refresh the page. A coworker and I joked that we should learn how to build one and do it for a Hack Week project one summer. I agreed that it was a good idea, but we never got around to it. However, I decided to dig into it now and see if it could be done!&lt;/p&gt;

&lt;p&gt;I found a wonderful &lt;a href=&quot;https://conclave-team.github.io/conclave-site/&quot;&gt;case study&lt;/a&gt; that another group made when they tried to solve this same problem. The tool they built is available to try out at &lt;a href=&quot;http://conclave.tech/&quot;&gt;conclave.tech&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I started building my own and successfully got peers to connect to each other over WebRTC via a shared url. Next was the sharing of actual data typed by clients. Central to this feature is avoiding conflicts as everyone types over the same characters. One clever way to solve this is with a new kind of datatype I had not heard of, called a &lt;a href=&quot;https://en.wikipedia.org/wiki/Conflict-free_replicated_data_type&quot;&gt;CRDT or confict-free replicated data type&lt;/a&gt;. Specifically, I would be dealing with a sequential CRDT.&lt;/p&gt;

&lt;p&gt;It works by treating the characters as nodes, and edits to those nodes then become children themselves. Each node keeps track of which user made it. I’m oversimplifying here, but by treating the data this way, it can manage all the edits from various users and ensure that everyone ends up with the same result on their respective computers! This was perhaps the project I had the most fun on, and wish I had more time to delve in and get it working like the conclave team did. There is always next time!&lt;/p&gt;

&lt;p&gt;As the Recurse Center often says, “never graduate!”.&lt;/p&gt;

</description>
        <pubDate>Sun, 10 May 2020 00:00:00 -0400</pubDate>
        <link>http://localhost:4000/blog/becoming-a-recurser</link>
        <guid isPermaLink="true">http://localhost:4000/blog/becoming-a-recurser</guid>
        
        
      </item>
    
      <item>
        <title>Zero Downtime Deployments with Docker and DigitalOcean</title>
        <description>&lt;p&gt;&lt;img src=&quot;/images/docker.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Previously, &lt;a href=&quot;https://www.explorableplaces.com&quot;&gt;Explorable Places&lt;/a&gt; used Capistrano to deploy to one droplet in DigitalOcean. This setup had a number of downsides and limitations. Among them,&lt;!--more--&gt; we had:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;a single point of failure&lt;/li&gt;
  &lt;li&gt;only &lt;em&gt;nearly&lt;/em&gt; zero downtime for deployments&lt;/li&gt;
  &lt;li&gt;no easy way to scale horizontally&lt;/li&gt;
  &lt;li&gt;difficulty in upgrades&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;When the app started out, it was easy and only necessary to have one box up that hosted everything: nginx, app, db and cache (memcached). Provisioning a new droplet would be a pain in the butt, and I had no way to distribute traffic to each box anyway. Platform upgrades (Ubuntu) proved to be a royal pain in the behind, and required the site to be down for some time, in addition to the risk involved in the update itself.&lt;/p&gt;

&lt;h2 id=&quot;docker&quot;&gt;Docker&lt;/h2&gt;

&lt;p&gt;Dockerizing the app would solve a couple of our issues, and enable us to solve the others. There are multiple articles out there about how to convert your app, no matter the stack, to Docker, so I won’t go into such a large topic here. But for me, the basic steps were:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Move DB out of our droplet, and into a managed host&lt;/li&gt;
  &lt;li&gt;Dockerize our app with docker-compose, and utilize Dockerhub to manage our images&lt;/li&gt;
  &lt;li&gt;Create a couple Docker droplets from the DigitalOcean marketplace, managed under a DigitalOcean load balancer&lt;/li&gt;
  &lt;li&gt;Write a deploy script that will deploy to each environment&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;deploying&quot;&gt;Deploying&lt;/h2&gt;

&lt;p&gt;Now that you presumably have your Dockerized app, along with all your separate &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;docker-compose&lt;/code&gt; files, environment variable files, and others that you do not want checked into source countrol, we need a way to get those files to our droplets, and start up our app.&lt;/p&gt;

&lt;p&gt;Below, I’ve outlined our deploy script. See the bottom of this post for all the gory details, but what it does is:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Use &lt;a href=&quot;https://github.com/digitalocean/droplet_kit&quot;&gt;DropletKit&lt;/a&gt; to get a list of our staging/production droplets&lt;/li&gt;
  &lt;li&gt;Loop over each droplet to do the following:
    &lt;ol&gt;
      &lt;li&gt;Take the droplet out of traffic by removing it from the load balancer&lt;/li&gt;
      &lt;li&gt;Copy all environment files, docker-compose files, etc. to the droplet.&lt;/li&gt;
      &lt;li&gt;Run a start up script within the droplet that:
        &lt;ol&gt;
          &lt;li&gt;Takes down all running containers and removes them, as well as volumes, and images.&lt;/li&gt;
          &lt;li&gt;Pulls in latest tagged image from DockerHub&lt;/li&gt;
          &lt;li&gt;Brings up containers&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;Put the droplet back into traffic by adding back to the load balancer (if everything was successful)&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;With this in place, you can simply deploy your app with:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;./deploy.rb staging
&lt;span class=&quot;c&quot;&gt;# or&lt;/span&gt;
./deploy.rb production&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h2 id=&quot;health-checks&quot;&gt;Health Checks&lt;/h2&gt;

&lt;p&gt;The one key here is that we must be certain that our server is up and serving traffic before we add it back to the load balancer to receive traffic. By default, Docker Compose will consider the container to be started and healty as soon as it is up, even if it takes 10-15 seconds for your server within your container to start.&lt;/p&gt;

&lt;p&gt;To make sure our app is ready to serve traffic, we can utilize health checks with Docker Compose. You can define this in your compose file like so:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-yaml&quot; data-lang=&quot;yaml&quot;&gt;&lt;span class=&quot;na&quot;&gt;version&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;2.1&quot;&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;healthcheck&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;curl --fail -s http://localhost:3000/healthcheck || exit &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;interval&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;5s&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;timeout&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;60s&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;retries&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;10&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;nginx&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;depends_on&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;condition&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;service_healthy&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;This health check will be run within your container, so you can reference localhost here. If you have other containers that depend on this one, you can define the conditions that will dictate when that container is brought up. Above, we have an nginx service that depends on our app. We tell it to wait until our app is healthy, which will be based on the health check we defined.&lt;/p&gt;

&lt;p&gt;Health checks will continue to run, so be sure to exlude it from any:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;SSL validation&lt;/li&gt;
  &lt;li&gt;Performance monitoring (will severely skew your ‘typical’ and ‘problem’ response times)&lt;/li&gt;
  &lt;li&gt;IP throttling (don’t want to throttle yourself)&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;scripts-gory-details&quot;&gt;Scripts (gory details)&lt;/h2&gt;

&lt;h3 id=&quot;deploy-script&quot;&gt;Deploy script&lt;/h3&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;#!/usr/bin/env ruby&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'rainbow'&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'droplet_kit'&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;client&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;DropletKit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;access_token: &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ENV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'DO_TOKEN'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;load_balancer_id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;load_balancers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;first&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;id&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;deploy_env&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ARGV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;deploy_env&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'production'&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;droplet_ids&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;load_balancers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;id: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;load_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;droplet_ids&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;droplets&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;droplet_ids&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;map&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;droplets&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;id: &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;deploy_env&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'staging'&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;droplets&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;droplets&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;id: &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ENV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'STAGING_DROPLET_ID'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;droplets&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;raise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;There are no droplets for deploy env: &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;deploy_env&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;droplet_hash&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# set statuses&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;droplets&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;droplet&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;droplet_hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;droplet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'not deployed'&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;droplets&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;droplet&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;deploy_env&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'production'&lt;/span&gt;
        &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Rainbow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;REMOVING &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;droplet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; FROM THE LOAD BALANCER&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;green&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;load_balancers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;remove_droplets&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;droplet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;id: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;load_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

    &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Rainbow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;COPYING OVER NGINX CONFIG TO &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;droplet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;green&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;# copy nginx&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# copy docker compose files and .env files&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;scp ./docker/nginx/nginx.conf ./docker/nginx/nginx.&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;deploy_env&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;.conf ./docker/nginx/ssl/&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;deploy_env&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;.explorableplaces.crt ./docker/nginx/ssl/&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;deploy_env&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;.explorableplaces.key docker-compose.yml docker-compose.&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;deploy_env&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;.yml .env.common .env.&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;deploy_env&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; root@&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;droplet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;public_ip&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;:~/&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Rainbow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;DEPLOYING NEW CONTAINERS TO &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;droplet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;green&lt;/span&gt;

    &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;IP: &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;droplet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;public_ip&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;deploy: &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;deploy_env&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;deploySuccess&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
        &lt;span class=&quot;s2&quot;&gt;&quot;DEPLOY_ENV&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;deploy_env&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;(export -p; cat ./start-up.sh) | ssh root@&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;droplet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;public_ip&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;  'bash -s'&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;deploySuccess&lt;/span&gt;
        &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Rainbow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;SUCCESSFULLY DEPLOYED NEW CONTAINERS TO &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;droplet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;green&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;droplet_hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;droplet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'deployed'&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;deploy_env&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'production'&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;load_balancers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;add_droplets&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;droplet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;id: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;load_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;droplet_hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;droplet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'deploy failed'&lt;/span&gt;
        &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Rainbow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;droplet_hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;red&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;raise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Did not execute deploy.sh script correctly&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;FINISHED DEPLOY, STATUS:&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;droplet_hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;: &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h3 id=&quot;start-up-script&quot;&gt;Start up script&lt;/h3&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$DOCKER_PASSWORD&lt;/span&gt; | docker login &lt;span class=&quot;nt&quot;&gt;-u&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$DOCKER_USERNAME&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--password-stdin&lt;/span&gt;
docker-compose down &lt;span class=&quot;nt&quot;&gt;--remove-orphans&lt;/span&gt;
docker system prune &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--all&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--volumes&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$DEPLOY_ENV&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$DEPLOY_ENV&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'production'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;then
    &lt;/span&gt;docker-compose &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; docker-compose.yml &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; docker-compose.production.yml pull &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; docker-compose &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; docker-compose.yml &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; docker-compose.production.yml up &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--no-build&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;elif&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$DEPLOY_ENV&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'staging'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;then
    &lt;/span&gt;docker-compose &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; docker-compose.yml &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; docker-compose.staging.yml pull &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; docker-compose &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; docker-compose.yml &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; docker-compose.staging.yml up &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--no-build&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;fi&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

</description>
        <pubDate>Fri, 28 Jun 2019 00:00:00 -0400</pubDate>
        <link>http://localhost:4000/blog/zero-downtime-deployments-with-docker-and-digitalocean</link>
        <guid isPermaLink="true">http://localhost:4000/blog/zero-downtime-deployments-with-docker-and-digitalocean</guid>
        
        
      </item>
    
      <item>
        <title>Progressive Rendering with Rails</title>
        <description>&lt;p&gt;&lt;img src=&quot;/images/prog.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;At my work, we use &lt;a href=&quot;http://markojs.com&quot;&gt;Marko&lt;/a&gt; as our templating engine, which supports &lt;a href=&quot;https://medium.com/ben-and-dion/progressive-rendering-a-killer-and-under-appreciated-feature-of-the-web-97c789b608c1&quot;&gt;progressive rendering&lt;/a&gt; out of the box. So maybe that is why I took it for granted when I decided I would try to implement the same thing for &lt;a href=&quot;https://www.explorableplaces.com&quot;&gt;Explorable Places&lt;/a&gt;. There are a few pages there that are data-heavy and it would help&lt;!--more--&gt; to start rendering the page right away rather than wait for everything to be loaded and rendered.&lt;/p&gt;

&lt;p&gt;I expected there to be a gem already for this, in some shape or form, but was pleasantly surprised to find out &lt;a href=&quot;http://api.rubyonrails.org/classes/ActionController/Streaming.html&quot;&gt;Rails supports this out of box&lt;/a&gt;, and has since Rails 3! Now, I got this working, but not without a few gotchas I thought I’d share.&lt;/p&gt;

&lt;h2 id=&quot;choose-a-templating-language-that-supports-streaming&quot;&gt;Choose a templating language that supports streaming&lt;/h2&gt;

&lt;p&gt;This may seem obvious, especially since I mentioned it above, but it wasn’t until later I realized I was in a pickle. I chose &lt;a href=&quot;http://haml.info/&quot;&gt;Haml&lt;/a&gt; when I first started the project because I liked it and it was a sort of standard in Rails to begin with, with how well it works with Ruby. I never had streaming the rendering of the page in mind back then. As it turns out, Haml does &lt;a href=&quot;https://github.com/haml/haml/issues/436&quot;&gt;&lt;em&gt;not&lt;/em&gt;&lt;/a&gt; support streaming. In fact, most templates don’t. But &lt;a href=&quot;https://en.wikipedia.org/wiki/ERuby&quot;&gt;ERB&lt;/a&gt; does, and so does &lt;a href=&quot;http://slim-lang.com/&quot;&gt;Slim&lt;/a&gt;. In &lt;a href=&quot;https://medium.com/@mario_chavez/rails-template-engines-performance-9ba18446895d&quot;&gt;benchmarking&lt;/a&gt;, it seems that Slim is actually &lt;em&gt;slightly&lt;/em&gt; faster than ERB, but not enough to make me learn it while getting this up and running, so ERB is what I went with.&lt;/p&gt;

&lt;p&gt;Since I only want a few pages to stream for now, I only needed to convert the layouts, templates and partials that those pages touch. This takes significantly less time than converting the whole site. &lt;a href=&quot;https://haml2erb.org/&quot;&gt;Haml2erb&lt;/a&gt; helped a lot with speeding this process up.&lt;/p&gt;

&lt;h2 id=&quot;avoid-any-middleware-that-alters-the-html-output&quot;&gt;Avoid any middleware that alters the html output.&lt;/h2&gt;

&lt;p&gt;Since we are streaming in chunks, if you have any middleware that alters this, the chunking will be corrupted and invalid and your page won’t even load. You’ll just get a not-so-helpful error message from your browser. I’ve read that this includes New Relic’s gem, but in my case, there were a few others.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/flyerhzm/bullet&quot;&gt;Bullet&lt;/a&gt; was easy, but &lt;a href=&quot;https://github.com/MiniProfiler/rack-mini-profiler&quot;&gt;Rack Mini Profiler&lt;/a&gt; was tougher since it loads automatically and I haven’t touched these gems in forever. The mini profiler won’t work even if you choose to log to file only. Both of these gems I had to load conditionally behind an environment variable so I could still use them easily from time to time in development.&lt;/p&gt;

&lt;p&gt;This may be all you need to get things up and running, but in my case, and hopefully in your case too, there should be one more step.&lt;/p&gt;

&lt;h2 id=&quot;monkey-patch-to-get-gzipped-chunks-working&quot;&gt;Monkey patch to get gzipped chunks working&lt;/h2&gt;

&lt;p&gt;The &lt;a href=&quot;https://github.com/rails/rails/blob/v5.1.3/actionpack/lib/action_controller/metal/streaming.rb&quot;&gt;current Rails streaming implementation&lt;/a&gt; works by rendering directly to a chunked body. This means it is chunked, and then gzipped by the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Rack::Deflater&lt;/code&gt; middleware that we use (and you should too!). This corrupts the encoding and again, your page won’t load save for a not-so-helpful error message. There is a &lt;a href=&quot;https://stackoverflow.com/questions/7986150/http-streaming-in-rails-not-working-when-using-rackdeflater&quot;&gt;good explanation of this on Stack Overflow&lt;/a&gt; with a link to the Http spec and the example of the monkey patch that I took from.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# config/application.rb&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;middleware&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Rack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Chunked&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;middleware&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Rack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Deflater&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;The patch expects you to use the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Rack::Chunked&lt;/code&gt; middleware in addition to the Deflater. It overwrites Rails’ implementation of streaming so that it only removes the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Content-Length&lt;/code&gt; header and makes sure &lt;em&gt;not&lt;/em&gt; to add the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Transfer-Encoding&lt;/code&gt; header. It will rely on the chunked middleware for encoding. It also directly renders the template, rather than to the chunked body, again relying on the middleware to do the chunking. Here is what I used:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;GzipStreaming&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;_process_options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;stream&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;delete&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:stream&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;super&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stream&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;unless&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;HTTP_VERSION&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;HTTP/1.0&quot;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;headers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Cache-Control&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;no-cache&quot;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;headers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;delete&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Content-Length&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:stream&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;_render_template&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;delete&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:stream&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;view_renderer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;render_body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;view_context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;super&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;ActionController&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Base&lt;/span&gt;
    &lt;span class=&quot;kp&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;GzipStreaming&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;The result is that the rack middlewares handle this correctly, finally! Good luck and happy rendering!&lt;/p&gt;

</description>
        <pubDate>Fri, 11 Aug 2017 00:00:00 -0400</pubDate>
        <link>http://localhost:4000/blog/progressive-rendering-with-rails</link>
        <guid isPermaLink="true">http://localhost:4000/blog/progressive-rendering-with-rails</guid>
        
        
      </item>
    
      <item>
        <title>HTTPS with Github Pages (and Custom Domains)</title>
        <description>&lt;p&gt;&lt;img src=&quot;/images/ssl-ghp.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/blog/converting-my-site-to-jekyll&quot;&gt;I’ve posted before&lt;/a&gt; about how I converted this site to Jekyll and hosted it on Github Pages. I’m a huge fan of this and it was really exciting last year when they announced support for https with Github pages. But alas, this is for the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;github.io&lt;/code&gt; urls, not custom domains.&lt;!--more--&gt; I’m to the point now where I do not want to wait any longer if there are other solutions out there. I would like to avoid the &lt;a href=&quot;https://motherboard.vice.com/en_us/article/google-will-soon-shame-all-websites-that-are-unencrypted-chrome-https&quot;&gt;impending Chrome death mark&lt;/a&gt;, as well as start testing out and using service workers with this site. As it turns out, there is a pretty simple way of doing this using Cloudflare.&lt;/p&gt;

&lt;h2 id=&quot;what-is-cloudflare&quot;&gt;What is Cloudflare&lt;/h2&gt;

&lt;p&gt;In a nutshell, it’s a service for a proxy that lies between origin (your server) and the user. This allows you to serve cached content from their edge CDN servers all over the world, mitigate DDOS attacks, and add SSL support, among many other things.&lt;/p&gt;

&lt;h2 id=&quot;how&quot;&gt;How?&lt;/h2&gt;

&lt;p&gt;There are plenty of tutorials out there on how to do it, &lt;a href=&quot;https://blog.cloudflare.com/secure-and-fast-github-pages-with-cloudflare/&quot;&gt;here’s a great one here&lt;/a&gt;. But if you already have github pages set up, then it just comes down to a few steps:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Create a Cloudflare account or log in&lt;/li&gt;
  &lt;li&gt;Create a new site (even if you did this a long time ago, the new creation steps may have changed)&lt;/li&gt;
  &lt;li&gt;It will walk you through and scan your DNS settings. Make sure your A or CNAME settings are correct in Cloudflare once it’s done.&lt;/li&gt;
  &lt;li&gt;Change your nameservers of your domain to match the ones Cloudflare gives you.&lt;/li&gt;
  &lt;li&gt;Change your SSL settings for your site to use “Full”.&lt;/li&gt;
  &lt;li&gt;Set a page rule to redirect all traffic to https. I used &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;http://*ttdavis.com/*&lt;/code&gt; to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Always use HTTPS&lt;/code&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;And that’s it! It will most likely take a few hours to update, which sucks because your site will be down in the mean time. But at least it’s simple and it’s free! Now with Cloudflare, Jekyll, and Github Pages, you get free hosting and free SSL certs. 🍻&lt;/p&gt;
</description>
        <pubDate>Sat, 27 May 2017 00:00:00 -0400</pubDate>
        <link>http://localhost:4000/blog/https-with-github-pages-with-custom-domains</link>
        <guid isPermaLink="true">http://localhost:4000/blog/https-with-github-pages-with-custom-domains</guid>
        
        
      </item>
    
      <item>
        <title>A Javascript Fractal Explorer</title>
        <description>&lt;p&gt;&lt;a href=&quot;http://sco.ttdavis.com/mandelbrot/?mi=200&amp;amp;er=5&amp;amp;co=true&amp;amp;j=true&amp;amp;ci=0.15&amp;amp;cr=-0.79&amp;amp;zi=0&amp;amp;zr=0&amp;amp;i=0.00366412213740458&quot; target=&quot;\_blank&quot;&gt;&lt;img src=&quot;/images/mandelbrot.jpg&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;A funny story about me is how I got into web development. It essentially boiled down to me learning, and then becoming obsessed with, &lt;a href=&quot;http://www.ticalc.org/archives/files/authors/62/6241.html&quot; target=&quot;\_blank&quot;&gt;making programs on my TI-83 Plus calculator&lt;/a&gt; in a BASIC-like language designed just for the calculator. This made it a perfect portable IDE for someone learning how to program. I made &lt;a href=&quot;http://www.ticalc.org/archives/files/fileinfo/288/28883.html&quot; target=&quot;\_blank&quot;&gt;minesweeper&lt;/a&gt;, &lt;a href=&quot;http://www.ticalc.org/archives/files/fileinfo/295/29524.html&quot; target=&quot;\_blank&quot;&gt;lights out&lt;/a&gt;, &lt;a href=&quot;http://www.ticalc.org/archives/files/fileinfo/296/29633.html&quot; target=&quot;\_blank&quot;&gt;D-Star (with custom level editor, I might add)&lt;/a&gt;, and a program to view fractals! Well, apparently I forgot&lt;!--more--&gt; to upload that last one. And so began my obsession as an adult to relearn and recreate this with my new fancy web development skills I’ve picked up in the last 15 years. So basically, &lt;a href=&quot;http://sco.ttdavis.com/mandelbrot/&quot; target=&quot;\_blank&quot;&gt;I did it in Javascript&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;After some quick digging, I realized I was way smarter as a high schooler than I am now. How did I do this before? Complex numbers, complex plane, how to iterate correctly and determine if it has escaped toward infinity. And after I figured all that stuff out, I had to tackle more problems, how to zoom in, how to colorize (both grayscale and color as the calculator had neither). This was going to be a tough task.&lt;/p&gt;

&lt;p&gt;(Also I’d like to point out all images in this post link to the fractal viewer itself, to see that image live)&lt;/p&gt;

&lt;h2 id=&quot;no-framework&quot;&gt;No Framework&lt;/h2&gt;

&lt;p&gt;I wanted to &lt;strong&gt;not&lt;/strong&gt; use a framework, as I did not see the need. This was a single page, single page application. 99% of the work would be done drawing to the canvas, and none of the inputs were related or reliant on any other elements. But, I did take a reactive approach, and it was cool to implement my own stateful app that has a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;setState&lt;/code&gt; function and batch renders state changes asynchronously. This part was definitely a little tricky but fun to work on.&lt;/p&gt;

&lt;h2 id=&quot;theres-no-i-in-javascript&quot;&gt;There’s No i in Javascript&lt;/h2&gt;

&lt;p&gt;There’s no I in team and the same is true for Javascript. No I’m not talking about &lt;em&gt;that&lt;/em&gt; “i” because I see it there after the r and before the p. I’m talking about &lt;a href=&quot;https://en.wikipedia.org/wiki/Imaginary_number&quot; target=&quot;\_blank&quot;&gt;imaginary numbers&lt;/a&gt;. When I made this on my graphing calculator, of course there is &lt;em&gt;i&lt;/em&gt;, and I used it. It made calculating the equation easy. But with javascript it became a bit more difficult. Luckily, math in general tends to have lots of shortcuts, and that was also the case here. Here’s the magic for calculating Z&lt;sub&gt;new&lt;/sub&gt; = Z&lt;sub&gt;old&lt;/sub&gt;&lt;sup&gt;2&lt;/sup&gt; + C where both Zs and C are complex numbers:&lt;/p&gt;

&lt;div class=&quot;pre-wrap&quot;&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ZNewReal&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;pow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ZOldReal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;pow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ZOldImaginary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Cr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ZNewImaginary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ZOldReal&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ZOldImaginary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;CImaginary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;absoluteValue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;sqrt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;pow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ZNewReal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;pow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ZNewImaginary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;/div&gt;

&lt;p&gt;With the absense of i also comes an alternative way of dealing with complex numbers. We must refer to both the &lt;em&gt;real&lt;/em&gt; and &lt;em&gt;imaginary&lt;/em&gt; parts separately (where a complex number is written &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;x + yi&lt;/code&gt;, x being the real part and i being the imaginary part).&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://sco.ttdavis.com/mandelbrot/?mi=450&amp;amp;er=5&amp;amp;co=true&amp;amp;j=false&amp;amp;ci=0.15&amp;amp;cr=-0.79&amp;amp;zi=0.24107896893625036&amp;amp;zr=-0.7312281391638837&amp;amp;i=0.000005938435328825743&quot; target=&quot;\_blank&quot;&gt;&lt;img src=&quot;/images/mandelbrot2.jpg&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;zooming-in&quot;&gt;Zooming In&lt;/h2&gt;

&lt;p&gt;Zooming in was not, in and of itself, that difficult. When the user clicks and drags a box to zoom in on, just save the left, right, top and bottom boundaries and that’s that…right? Well, as soon as you open that link in a window with a different aspect ratio, it gets all mucked up. Instead of saving the “viewport window”, I needed to save the origin (middle coordinate of the screen), and the delta of values between the x plane (real numbers) and y plane (imaginary numbers). This way I could render and view, at any zoom level, on any device and it will be centered and look correct.&lt;/p&gt;

&lt;h2 id=&quot;smoothing-color&quot;&gt;Smoothing Color&lt;/h2&gt;

&lt;p&gt;When rendering, I would get pretty noticable lines where values would change abruptly. While this was mathematically correct, I’ve seen many more examples on the internet that looks much smoother. Since I am a very visual person (why I love working on the front end, and hey, I even have a BFA), this smoother kind of look is what I wanted to go for. A pretty clever way to smooth color, &lt;a href=&quot;http://www.karlsims.com/julia.html&quot; target=&quot;\_blank&quot;&gt;I found here&lt;/a&gt;. That was way easier than I thought it would be!&lt;/p&gt;

&lt;div class=&quot;pre-wrap&quot;&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;newNumberOfIterations&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;actualNumberOfIterations&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;finalAbsoluteValueOfLastIterationResult&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;/div&gt;

&lt;p&gt;Sweet variable names, no?&lt;/p&gt;

&lt;h2 id=&quot;the-end&quot;&gt;The End&lt;/h2&gt;

&lt;p&gt;All in all, this was a lot of fun to work on and hope others enjoy it at least a fraction as much as I did. &lt;a href=&quot;http://sco.ttdavis.com/mandelbrot/&quot; target=&quot;\_blank&quot;&gt;Check it out here&lt;/a&gt;, or just look at my screenshots below to see what all this talk is about (remember they are clickable!).&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://sco.ttdavis.com/mandelbrot/?mi=250&amp;amp;er=5&amp;amp;co=true&amp;amp;j=true&amp;amp;ci=0.15&amp;amp;cr=-0.79&amp;amp;zi=0.4728578244274809&amp;amp;zr=-0.20152671755725204&amp;amp;i=0.0004637404580152672&quot; target=&quot;\_blank&quot;&gt;&lt;img src=&quot;/images/mandelbrot3.jpg&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;
&lt;a href=&quot;http://sco.ttdavis.com/mandelbrot/?mi=150&amp;amp;er=5&amp;amp;co=true&amp;amp;j=true&amp;amp;ci=0.008&amp;amp;cr=0.28&amp;amp;zi=0&amp;amp;zr=0&amp;amp;i=0.00366412213740458&quot; target=&quot;\_blank&quot;&gt;&lt;img src=&quot;/images/mandelbrot4.jpg&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;
&lt;a href=&quot;http://sco.ttdavis.com/mandelbrot/?mi=50&amp;amp;er=5&amp;amp;co=false&amp;amp;j=true&amp;amp;ci=0&amp;amp;cr=-1.476&amp;amp;zi=0&amp;amp;zr=0&amp;amp;i=0.00366412213740458&quot; target=&quot;\_blank&quot;&gt;&lt;img src=&quot;/images/mandelbrot5.jpg&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;
&lt;a href=&quot;http://sco.ttdavis.com/mandelbrot/?mi=55&amp;amp;er=5&amp;amp;co=true&amp;amp;j=true&amp;amp;ci=-0.01&amp;amp;cr=0.3&amp;amp;zi=0&amp;amp;zr=0&amp;amp;i=0.00366412213740458&quot; target=&quot;\_blank&quot;&gt;&lt;img src=&quot;/images/mandelbrot6.jpg&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;
&lt;a href=&quot;http://sco.ttdavis.com/mandelbrot/?mi=50&amp;amp;er=5&amp;amp;co=false&amp;amp;j=true&amp;amp;ci=1.04&amp;amp;cr=-0.162&amp;amp;zi=0&amp;amp;zr=0&amp;amp;i=0.00366412213740458&quot; target=&quot;\_blank&quot;&gt;&lt;img src=&quot;/images/mandelbrot7.jpg&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;
&lt;a href=&quot;http://sco.ttdavis.com/mandelbrot/?mi=200&amp;amp;er=5&amp;amp;co=false&amp;amp;j=true&amp;amp;ci=0.3&amp;amp;cr=-0.7&amp;amp;zi=0&amp;amp;zr=0&amp;amp;i=0.00366412213740458&quot; target=&quot;\_blank&quot;&gt;&lt;img src=&quot;/images/mandelbrot8.jpg&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

</description>
        <pubDate>Sun, 14 May 2017 00:00:00 -0400</pubDate>
        <link>http://localhost:4000/blog/a-javascript-fractal-explorer</link>
        <guid isPermaLink="true">http://localhost:4000/blog/a-javascript-fractal-explorer</guid>
        
        
      </item>
    
      <item>
        <title>What is grace?</title>
        <description>&lt;p&gt;&lt;img src=&quot;/images/dict.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;My whole life, I don’t think I had given this question too much thought. Despite being raised and confirmed Catholic, it was one of those things that just goes in one ear and comes out the other. Grace is to be graceful, elegant, smooth, whatever. That’s about as much as I knew or cared.&lt;/p&gt;

&lt;p&gt;Being the lapsed Catholic that I am, it wasn’t until a couple decades later where I met my wife that I encountered this concept first hand, and no, it wasn’t with her. It was with her dad.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;Sam was a pretty silly character. With a stern look, he could easily and calmly intimidate you. And then turn right around and tell a dirty joke in front of everyone at the dinner table. He did just that the first time I met him! So what did I do? The only thing a person in my situation could, I told one right back. He was the deacon at his church, attended mass every Sunday, was a religious and maybe more importantly, spiritual man. With my wife growing up, they volunteered to help the homeless on Christmas or Thanksgiving. It was important to help out those that are more unfortunate, to care for them when no one else would.&lt;/p&gt;

&lt;p&gt;It was shortly after this time that Sam and his wife, Beth, were getting a new boat. It was also around this time that Sam was diagnosed with glioblastoma brain cancer. I was still getting to know Sam, but this idea of Grace is something that would follow him around more and more over the next two years.&lt;/p&gt;

&lt;p&gt;Brain cancer is probably the worst illness to have a loved one go through. It changes them, what they remember, how they talk, and listen, their mood and temperament. They could seem perfectly normal on the outside, yet almost be a different person on the inside. It’s as if you very slowly lose them before they actually go. Through this period, Sam impressed upon me a new meaning of the word strength, and as many of his loved ones were oft to mention, grace. He handled the whole thing with grace. I heard him described this way from many different people in various independent situations. This wasn’t some coincidence.&lt;/p&gt;

&lt;p&gt;Does this mean he handled the whole thing with “simple elegance”? Maybe it did to some, but not me, it didn’t feel right. Now, looking in a dictionary, finally, I saw this &lt;em&gt;other&lt;/em&gt; meaning of grace:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;The unmerited favor of God.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;It goes on from there with more definitions, all seemingly unrelated and related at the same time. It seems to me this word is a bit of a catch-all for all things religious. It can be used in almost any context in church mass and still fit. I suppose I could wrangle one of those definitions in to fit Sam, after all, he was a devout man and had a love for God and others. But it was when I was reading a book that I came across a quote that really gave me pause, and immediately, I mean immediately made me think of Sam.&lt;/p&gt;

&lt;p&gt;The book is &lt;a href=&quot;https://en.wikipedia.org/wiki/A_River_Runs_Through_It_(novel)&quot;&gt;A River Runs Through It&lt;/a&gt;, by Norman MacLean. It’s a &lt;a href=&quot;https://en.wikipedia.org/wiki/A_River_Runs_Through_It_(film)&quot;&gt;fantastic movie&lt;/a&gt;, but it’s an even better book, and beautifully written. It is autobiographical, and MacLean’s father is a minister, as well as an expert fly fisherman. He teaches his boys everything they need to know, about fishing or life otherwise, &lt;em&gt;through&lt;/em&gt; fishing. It is jammed pack with eloquent passages relating fishing to life, or God, in a way that just wouldn’t make it into the church or the Bible. He writes:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;My father was very sure about certain matters pertaining to the universe. To him all good things — trout as well as eternal salvation — come by grace and grace comes by art and art does not come easy.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;This instantly struck me, this was Sam. No he did not trout fish, but he &lt;em&gt;sailed&lt;/em&gt;. He loved to sail, had wanted to his whole life, and he was good at it. To be on the water, under the sun, sails full, this is where I think he really felt spiritual, where he felt God. This is where I got to know him, in the Springs and Summers, where he continued to sail year after year after his diagnosis.&lt;/p&gt;

&lt;p&gt;He and his wife went sailing when they were first married. But it proved too costly and they sold the little boat they had. Once they started a family though, every year, and just about every weekend when the weather was good, was spent sailing. This was no short drive into town either. This was a 6 hour drive each way to get to the boat.&lt;/p&gt;

&lt;p&gt;Sam and Beth worked so hard to complete this dream of theirs. It most certainly did not come easy. But over time it did come, and because of it, they have some of their most important “good things” that happened in their life because of sailing, and it came by grace.&lt;/p&gt;

&lt;p&gt;It was only fitting that his last boat was named Grace, after all. He knew before I did. We read this quote at Sam’s funeral, and it still holds true today as it did then.&lt;/p&gt;
</description>
        <pubDate>Sat, 11 Feb 2017 00:00:00 -0500</pubDate>
        <link>http://localhost:4000/blog/what-is-grace</link>
        <guid isPermaLink="true">http://localhost:4000/blog/what-is-grace</guid>
        
        
      </item>
    
      <item>
        <title>The What, Why, and How of HTTPS</title>
        <description>&lt;p&gt;&lt;img src=&quot;/images/ssl.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;In the past, you would probably only really check if a website used https if you are purchasing something, or &lt;em&gt;maybe&lt;/em&gt; if you were logging in. In the last few years, there has (rightly) been a large movement to better ensure privacy and security. Why not have every site and every page be encrypted? That’s a good question, and one Google has already answered for itself. Not only will Google start &lt;a href=&quot;http://motherboard.vice.com/read/google-will-soon-shame-all-websites-that-are-unencrypted-chrome-https&quot;&gt;shaming websites that are not https&lt;/a&gt;, they will also &lt;a href=&quot;https://webmasters.googleblog.com/2014/08/https-as-ranking-signal.html&quot;&gt;give an SEO boost&lt;/a&gt; to those that are. &lt;!--more--&gt;If your customer’s peace of mind wasn’t enough, you now have more than enough incentive to make the switch.&lt;/p&gt;

&lt;p&gt;I recently decided to do this for &lt;a href=&quot;https://www.explorableplaces.com&quot;&gt;Explorable Places&lt;/a&gt;, for the reasons above and also in preparation of supporting Stripe and credit card payments. While it is simple to make this change, there is a few things worth learning (and documenting) and some snags you may run into.&lt;/p&gt;

&lt;h2 id=&quot;what-is-sslhttps&quot;&gt;What is SSL/HTTPS?&lt;/h2&gt;

&lt;p&gt;Otherwise know as SSL (secure socket layer), HTTPS is a protocol, in the same realm as regular ole HTTP or FTP, that is encrypted and was developed by Netscape. It listens on port 443 as opposed to port 80. You’ll need just a couple things to enable it and start using in on your site: You’ll need a &lt;strong&gt;&lt;em&gt;certificate&lt;/em&gt;&lt;/strong&gt; file and a &lt;strong&gt;&lt;em&gt;private key&lt;/em&gt;&lt;/strong&gt; file.&lt;/p&gt;

&lt;p&gt;Without going into too much detail, the certificate is signed by an authority that the browser trusts (it only trusts known certificate authorities). I’ll get into signing in a bit though. In addition to being signed, the certificate &lt;strong&gt;also contains a public key&lt;/strong&gt; that will be sent to the browsers. When you make a request to the server from your browser, it will encrypt that data with that public key. The data in that request can only be decrypted with the private key residing on the server.&lt;/p&gt;

&lt;p&gt;So the server decrypts the request with its private key and does whatever it needs to with it. It’ll then return a response that it encrypts with said key again. This response in turn can only be decrypted with the public key. It’s actually quite nice how they work together.&lt;/p&gt;

&lt;p&gt;Now it’s important to point out that the data being sent to the browser is encrypted, but that doesn’t mean it’s secure since all it takes to decrypt it is the public key, which anyone has access to. But all data sent &lt;em&gt;to&lt;/em&gt; it, that is locked down. 🔒&lt;/p&gt;

&lt;p&gt;Back to signing the certificate. You could create your own certificate and sign it yourself (as opposed to a known authority) and use that. Many people do this when developing locally or for apps within a private network. But to public facing apps, self-signed certificates can’t be trusted since nobody knows you and you could be up to no good. Browsers will throw up a very scary looking warning page if you sign your own certificate, and basically freak the hell out of anyone visiting your site.&lt;/p&gt;

&lt;p&gt;So you’ll need to purchase one, which will run from very cheap with no paperwork (insures for very little, good for personal sites), to very expensive and lots of paperwork (insures for a lot). The latter requires you to prove your business is who they say they are, and can allow you to include that name next to the URL in the browser. This also looks very nice, so it may be worth it to you if security is particularly a big deal.&lt;/p&gt;

&lt;p&gt;I went with just the plain old domain verification option, which can be issued immediately with no paperwork, I just have to prove that I own the domain. This can be done with an email that is associated with the domain, easy peasy.&lt;/p&gt;

&lt;h2 id=&quot;how-do-i-get-one&quot;&gt;How do I get one&lt;/h2&gt;

&lt;p&gt;Once you’ve decided on what you want and purchased it, you’ll need to request the certificate from the issuing company. To do this, you’ll need a certificate signing request (CSR) file. This can be created with many tools available around the internet, most of which cost money. Or you could do it on the command line with openSSL:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;openssl req &lt;span class=&quot;nt&quot;&gt;-new&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-newkey&lt;/span&gt; rsa:2048 &lt;span class=&quot;nt&quot;&gt;-nodes&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-keyout&lt;/span&gt; YOUR-DOMAIN.key &lt;span class=&quot;nt&quot;&gt;-out&lt;/span&gt; YOUR-DOMAIN.csr&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;This will create a token with 2048 bit encryption, and output your CSR and your private KEY file which you will need for later. When you enter this command, it will prompt you through a set of questions, the only one worth noting is the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;name&lt;/code&gt; field, which should be your domain name (if you are doing a domain verification certificate like me).&lt;/p&gt;

&lt;p&gt;When finished, submit this CSR to the issuing company and answer whatever other questions they have (it’s very easy), and you will get issued your certificate (CRT) file within a few minutes. You should now have your certificate &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.crt&lt;/code&gt; and private key &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.key&lt;/code&gt; files.&lt;/p&gt;

&lt;h2 id=&quot;intermediate-certificate&quot;&gt;Intermediate Certificate&lt;/h2&gt;

&lt;p&gt;Depending on the type of certificate you purchase, you may be required to include an intermediate certificate. An intermediate certificate lies between the domain certificate (yours) and the root certificate of the issuing authority. This is done to ensure its authenticity and maintain the “Chain of Trust”™ because it’s insecure to include the root certificate itself. To include this, you will need to chain them together. Chaining is nothing more than file concatenation.&lt;/p&gt;

&lt;p&gt;You will be able to just download an intermediate certificate from the issuer as there is no customization or CSR needed for them, everyone gets the same one. Then either in a text editor (with no formatting) or through the command line, concatenate the files with your domain certificate first and intermediate second.&lt;/p&gt;

&lt;h2 id=&quot;telling-your-server-to-use-them&quot;&gt;Telling your server to use them&lt;/h2&gt;

&lt;p&gt;Now that you are all set, you’ll need to get your server configured. This includes uploading the chained certificate (or regular domain certificate if you did not need to chain) and the KEY file from the beginning. You can put these anywhere. I have a linux server and put the certificate in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/ssl/certs&lt;/code&gt; and the key in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/ssl/private&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Then in your nginx configuration file (or where ever your server config is), you will need to tell it where those files are. You will also need to tell the server to listen on port 443. For nginx and unicorn this will look something like:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-nginx&quot; data-lang=&quot;nginx&quot;&gt;&lt;span class=&quot;k&quot;&gt;server&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kn&quot;&gt;listen&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;443&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kn&quot;&gt;ssl&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kn&quot;&gt;ssl_certificate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;/etc/ssl/certs/YOUR-DOMAIN.crt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kn&quot;&gt;ssl_certificate_key&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;/etc/ssl/private/YOUR-DOMAIN.key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;# EVERYTHING ELSE IS THE SAME AS PORT 80 CONFIG EXCEPT:
&lt;/span&gt;
    &lt;span class=&quot;kn&quot;&gt;location&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@unicorn&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;# YOU'LL WANT TO ADD THIS TOO IF YOU USE RAILS
&lt;/span&gt;        &lt;span class=&quot;kn&quot;&gt;proxy_set_header&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;X-Forwarded-Proto&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;https&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;c1&quot;&gt;# OTHER SETTINGS ARE THE SAME
&lt;/span&gt;    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;If you use rails, you’ll likely use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;force_ssl&lt;/code&gt; in your controllers. I use it in the application controller to force https for all routes. It relies on the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;X-Forwarded-Proto&lt;/code&gt; header to work and is why rails needs it.&lt;/p&gt;

&lt;p&gt;Then just restart your server, for nginx: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sudo /etc/init.d/nginx restart&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Now when you visit your site with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https://&lt;/code&gt;, it should work and you should see the little green lock. If not, you may want to troubleshoot with the issuing company to get it resolved. Also, you will need to make sure &lt;strong&gt;ALL&lt;/strong&gt; assets you serve from the page (js, css, images, fonts, etc) are served via SSL as well, or the browser will warn the user, or possibly not work at all.&lt;/p&gt;

&lt;p&gt;Welcome to the secure side! 🔐&lt;/p&gt;

&lt;p&gt;Now I just need to wait for Github to allow for https of github pages with a custom domain and I can revisit this article.&lt;/p&gt;

</description>
        <pubDate>Mon, 19 Sep 2016 00:00:00 -0400</pubDate>
        <link>http://localhost:4000/blog/the-what-why-and-how-of-https</link>
        <guid isPermaLink="true">http://localhost:4000/blog/the-what-why-and-how-of-https</guid>
        
        
      </item>
    
      <item>
        <title>Type checking in JS, an experiment</title>
        <description>&lt;p&gt;&lt;img src=&quot;/images/type-check.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;There’s a saying I’ve heard that involves developers and straight jackets. One might wear one and say “it’s so constricting, I can’t breathe or move!”, while another will wear the same one and say “Ohh, feels so warm and cozy!”. That’s static typed languages for you.&lt;/p&gt;

&lt;p&gt;Anyone who has ever worked with a statically typed language like Java must feel so out of sorts in Javascript. &lt;!--more--&gt;As such, there are all kinds of libraries out there to check types for you, even entire &lt;a href=&quot;https://www.dartlang.org/&quot;&gt;new languages&lt;/a&gt; that compile to js have looked to solve this problem. Facebook &lt;a href=&quot;http://flowtype.org/&quot;&gt;created an entire library&lt;/a&gt; to add their own annotations that do post processing for checking types. Obviously this is an issue people care about.&lt;/p&gt;

&lt;p&gt;But javascript is a very expressive and dynamic language that should be able to handle something like this with no problem. So that’s what I set out to do, because more or less, I’m a nerd that is interested in this sort of thing.&lt;/p&gt;

&lt;h2 id=&quot;the-basics&quot;&gt;The Basics&lt;/h2&gt;

&lt;p&gt;Usually, we care most about what goes in and what comes out of a function. Asserts can be used to help mediate this and aid in debugging, especially with live data. But this can be tedious, repetitive, and cumbersome. What I wanted was something simple, short and especially readable. A small library called &lt;a href=&quot;https://github.com/scttdavs/typist&quot;&gt;Typist&lt;/a&gt; is what I came up with and here is what it looks like:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;makeArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;typist&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;takes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                      &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;does&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;foo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;bar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                        &lt;span class=&quot;nx&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;foo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;bar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
                        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
                      &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
                      &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;returns&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                      &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;done&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;makeArray&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([],&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// [&quot;1&quot;, 2]&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;makeArray&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([],&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Throws TypistError&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;I think just by reading it you can tell what is going on and that is the point, add type checking while maintaining a readable structure that is obvious what its purpose is.&lt;/p&gt;

&lt;p&gt;Typist makes use of some other methods in its API for type checking: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;typist.check()&lt;/code&gt; which takes an array of types and values to check, and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;typist[type]()&lt;/code&gt; which takes a value that will be returned only if it is the right type.&lt;/p&gt;

&lt;p&gt;If you were to write out the previous example literally and with those two methods, it would be the same as something like this:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;makeArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;foo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;bar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;typist&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;check&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;foo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;Number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;bar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;

  &lt;span class=&quot;nx&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;foo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;bar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;typist&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;There’s a bit more though, as another option is to use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;typist(Type, function)&lt;/code&gt; which will return a curried function, that when invoked, will have its return value type checked. If it is the right type, it gets returned and if not, a TypistError is thrown.&lt;/p&gt;

&lt;p&gt;Here are some more examples that allow you to pick and choose the level of type checky-ness you want, the chainable all-in-one example from above to a more granular approach:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;lowercase&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;typist&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;toLowerCase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// returns the string if it is the right type&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;lowercase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Throws TypistError&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;lowercase&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;typist&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;is&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;toLowerCase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// do something else&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;lowercase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// will hit else branch&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;lowercase&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;typist&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;lowercase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Throws TypistError&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h2 id=&quot;handling-errors&quot;&gt;Handling Errors&lt;/h2&gt;

&lt;p&gt;It would make the most sense to return a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TypeError&lt;/code&gt; when a check fails, but this would be confusing if some type error unrelated to this library occurs. It would be tough to debug and distinguish which came from Typist and which didn’t. For that reason, Typist throws its own custom errors that inherit from &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TypeError&lt;/code&gt;, including a helpful message:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;span class=&quot;go&quot;&gt;TypeError: TypistError: Expected 1,2,3 to be of type String&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h2 id=&quot;support&quot;&gt;Support&lt;/h2&gt;

&lt;p&gt;Typist is written in ES5 and should work on all versions of node. Due to dev depenencies, Node v4 or higher is required to run the tests.&lt;/p&gt;

</description>
        <pubDate>Mon, 11 Apr 2016 00:00:00 -0400</pubDate>
        <link>http://localhost:4000/blog/type-checking-js</link>
        <guid isPermaLink="true">http://localhost:4000/blog/type-checking-js</guid>
        
        
      </item>
    
      <item>
        <title>What you want to be when you're grown up</title>
        <description>&lt;h2 id=&quot;childhood-aspirations&quot;&gt;Childhood Aspirations&lt;/h2&gt;

&lt;p&gt;Have you ever wanted to do something other than what you do now, that is, now that you’re grown up? I did, a few times actually. When I was much younger, helping animals sounded like a great and noble cause. I mean, I loved our dog, and I loved animals, so it was a match it seems. I even earned the Veterinary Medicine merit badge, so you knew I meant business. But it was during &lt;!--more--&gt; those merit badge requirements I met with an actual Vet and followed him for an afternoon. One teenage employee cleaned cages all day, not exactly the part time job I would look forward to in pursuing my new career. And the Vet himself, he showed me how to neuter a cat. You might think this noble professional would take great care in this procedure. He would carefully make an incision, a couple snips here and there, and then sew him right up, good as new…errr well maybe not &lt;em&gt;as new&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Reality it seems, is not as we always picture it. He wrapped his fingers around both cat testes and ripped them out in one motion, tossed them in the trash can on top of some paper and then sewed him up. The cat laying on his back, looking up dazedly around the room, didn’t even seem bothered by the whole ordeal. I looked down horrified at the little pill shaped balls sitting there in the trash next to some discarded mail and wrappers. It was then I realized this is not for me. I would not be helping animals 95% of the time. Instead I would spend most of my day and my career, my life, violently removing animals reproductive organs.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/philmont.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;adulthood-ish-aspirations&quot;&gt;Adulthood-ish Aspirations&lt;/h2&gt;

&lt;p&gt;I hadn’t worried much about what I was going to major in in college. I settled on graphic design because I like computers and I like computer graphics. Keeping things simple, I stuck with it. My sophomore year though, I had to take a science class and geology fit perfectly into my schedule. The professor was one of the more sleep inducing ones I’ve had, an expert powerpointer if I ever saw one. But despite his poor delivery, and even poorer jokes, I showed up to every class and peeled my eyes open to stay awake because I loved it. Maybe it was the void it filled with actually understanding how the Earth works. Or maybe it was the stories such knowledge inherently told about our planet. It felt a little like learning about what your great grandfather was like and what he did. You felt a fond connection to the past and to this thing you never knew or knew anything about before.&lt;/p&gt;

&lt;p&gt;I’ve had this feeling before too. Also back in my time in Boy Scouts, many of the dads in our troop were geologists. This really was a unique privilege when you are hiking around the mountains as much as you do in scouts. We would come upon some cliffs or other rock formations and one of the dads would tell us not only what kind of rocks they were and how they formed, but he could extrapolate the history of the very ground we stood on for the past several million years. It was magic really. It made your imagination run wild to picture what it was like where you stood 20 million years ago, and even feel special that you can appreciate it, where some other hiker might walk by the same spot never knowing any better of the wonder and history that laid under his feet.&lt;/p&gt;

&lt;p&gt;Yeah, I thought it would be just fine to be a geologist, to be outside all day, away from the office, the desk, the routine and everydayness of a regular job. But reality it seems, is rarely so aligned with our expectations. Those dads in our troop, every single one worked for an oil company. They used their magic to predict, with a certain accuracy, the chances of there being oil beneath a given area. What imagination did this instill, what wonder or joy? None.&lt;/p&gt;

&lt;p&gt;It was a strange coincidence that the two careers I had hoped for equated to either ripping out an animals testicles or pinpointing where to rip out the Earth’s sealed up carbon only to release it back again. Could you boil down all career paths down to the same sort of nihilistic views? Maybe so. But I’m not going to lie, I still think about it whenever I see a mountain, or a canyon or a cliff. I think about the story there that made it, and I think about the history, and I think about maybe taking another geology class.&lt;/p&gt;
</description>
        <pubDate>Wed, 03 Feb 2016 00:00:00 -0500</pubDate>
        <link>http://localhost:4000/blog/what-you-want-to-be-when-youre-grown-up</link>
        <guid isPermaLink="true">http://localhost:4000/blog/what-you-want-to-be-when-youre-grown-up</guid>
        
        
      </item>
    
  </channel>
</rss>
